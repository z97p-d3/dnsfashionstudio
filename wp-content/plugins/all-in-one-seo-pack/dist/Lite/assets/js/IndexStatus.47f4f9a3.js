import{J as rt,i as E,j as kt,k as xt,u as Ct,l as st}from"./index.285ff0f2.js";import{C as at}from"./Card.1e710d85.js";import{C as Tt}from"./DonutChartWithLegend.df58f29f.js";import{c as Rt,a as wt,b as ct}from"./Caret.7cc96622.js";import{g as D,f as N,v as It,o as a,k as u,l as c,a as e,J as lt,t as i,c as n,u as t,x as d,b as S,H as h,G as F,q as m,N as j,K as ut,y as Lt,n as Pt}from"./runtime-dom.esm-bundler.baf35205.js";import"./translations.d159963e.js";import{u as Ft}from"./IndexStatus.592e1881.js";import{u as At}from"./PostTypes.dafa8837.js";import{u as Ot}from"./WpTable.bafc3fc9.js";import{C as z}from"./Tooltip.70b51a50.js";import{C as Ht}from"./Table.77e3b6c3.js";import{a as J,t as Vt}from"./index.d34eb513.js";import{S as it}from"./Link.ad58218a.js";import{S as K}from"./External.e551aa30.js";import{_ as g}from"./default-i18n.20001971.js";import{_ as $t}from"./_plugin-vue_export-helper.eefbdd86.js";import{C as Gt}from"./Blur.601d8ea8.js";import{C as jt}from"./Index.a6ae6538.js";import{R as Ut}from"./RequiredPlans.7910518e.js";import{u as Bt}from"./Cta.bce043d1.js";import{u as Mt}from"./License.217b5dc3.js";import"./helpers.30bfefb8.js";import"./Slide.1db617da.js";import"./AnimatedNumber.572be72b.js";import"./numbers.9fc174f3.js";import"./Calendar.ad6a53a7.js";import"./Exclamation.a4801e64.js";import"./Mobile.e6e7cfc6.js";import"./ScrollTo.81bea8a7.js";import"./Download.7a5bbc25.js";import"./Row.c7b7fb90.js";import"./constants.a8a14dc3.js";import"./addons.fd6d6e69.js";import"./upperFirst.257d9f8f.js";import"./_stringToArray.f9ddb970.js";import"./toString.a2f58cc2.js";import"./license.23789a1a.js";const Nt={class:"post-title"},Dt=["onClick"],Et={key:0,class:"row-actions"},Wt={class:"edit"},qt=["href"],zt=["href"],Jt=["onClick"],Kt={class:"inner-row"},Qt={class:"inner-row__heading"},Xt={class:"inner-table inner-table--index-status"},Yt=e("thead",null,[e("tr",null,[e("th"),e("th"),e("th"),e("th")])],-1),Zt={key:0},te={colspan:"4"},ee={key:0},se={key:1},ae=["href"],le={scope:"col"},ie={class:"inner-table__col inner-table__col--items-start"},oe={scope:"col"},ne={class:"inner-table__col inner-table__col--items-start"},re={scope:"col"},ce={class:"inner-table__col inner-table__col--items-start"},ue=["innerHTML"],de={scope:"col"},he={class:"inner-table__col inner-table__col--items-start"},_e={scope:"col"},pe={class:"inner-table__col inner-table__col--items-start"},ge=["innerHTML"],me={scope:"col"},be={class:"inner-table__col inner-table__col--items-start"},fe=["innerHTML"],ve={scope:"col"},Se={class:"inner-table__col inner-table__col--items-start"},ye=["innerHTML"],ke={scope:"col"},xe={class:"inner-table__col inner-table__col--items-start"},Ce=["innerHTML"],Te={key:0},Re={colspan:"4"},we=["href"],Ie={class:"inner-row__heading"},Le={class:"inner-table"},Pe={class:"inner-table__col"},Fe=["href"],Ae={key:1},Oe={class:"inner-row__heading"},He={class:"inner-table"},Ve={class:"inner-table__col"},$e=["href"],Ge={key:1},je={class:"inner-row__heading"},Ue={class:"inner-table inner-table--rich-results"},Be=e("thead",null,[e("tr",null,[e("th"),e("th"),e("th")])],-1),Me={scope:"col"},Ne={class:"inner-table__col inner-table__col--items-start"},De={class:"rich-result-type__label"},Ee={colspan:"2"},We={key:0,class:"rich-result-type-item-issues"},qe={key:1},ze={class:"inner-table__col"},Je={key:1},Ke={key:2},Qe={colspan:"3"},Xe=["href"],Ye=["title"],Ze=["title"],ts=["title"],es=["title"],ss=["title"],as={key:0,class:"loader-overlay-table"},ot="searchStatisticsIndexStatus",nt="index-status-objects-table",ls={__name:"ObjectsTable",props:{paginatedRows:Object,selectedStatus:String,showTableFooter:{type:Boolean,default:!0},showHeader:{type:Boolean,default:!0}},setup(T){const o="all-in-one-seo-pack",b=rt(),x=E(),y=kt(),_={richResults:g("Rich Results",o),richResultTypes:g("Rich Result Types",o),richResultTypesHelp:g("Results of the Google Rich Results Test. These are the different schema graphs that are added to the post. Empty if no rich results were found.",o),indexStatusResult:g("Index Status Result",o),sitemaps:g("Sitemaps",o),sitemapsHelp:g("Any sitemaps that this URL was listed in, as known by Google. Not guaranteed to be an exhaustive list, especially if Google did not discover this URL through a sitemap. Empty if no entries in sitemaps were found.",o),referringPages:g("Referring URLs",o),referringPagesHelp:g("URLs that link to the inspected URL, directly and indirectly.",o),issues:g("Issues",o),noIssues:g("No issues",o),notAvailable:g("N/A",o),refreshStatus:g("Refresh Status",o)},R=T,$=D(new Set),A=D(null),{items:l,parseRichResults:O,strings:I}=Ft(),{editPost:U,viewPost:r}=At(),{orderBy:k,orderDir:B,processAdditionalFilters:H,processChangeItemsPerPage:V,processFilterTable:W,processPagination:ht,processSearch:_t,processSort:pt,searchTerm:gt,selectedFilters:Q,wpTableKey:mt,wpTableLoading:X}=Ot({changeItemsPerPageSlug:ot,fetchData:b.fetchIndexStatusObjects,tableId:nt,tableRef:A.value,selectedFilters:{}}),bt=N(()=>R.selectedStatus?{...Q.value,status:R.selectedStatus}:Q.value),ft=N(()=>R.paginatedRows.totals.page),vt=N(()=>[{slug:"title",label:g("Title",o),sortable:1<R.paginatedRows.totals.total,sortDir:k.value==="title"?B.value:"asc",sorted:k.value==="title"},{slug:"verdict",label:l.verdict.title,width:"110px"},{slug:"robotsTxt",label:l.robotsTxtState.title,width:"110px"},{slug:"pageFetch",label:l.pageFetchState.title,width:"110px"},{slug:"crawledAs",label:l.crawledAs.title,width:"120px"},{slug:"richResults",label:_.richResults,width:"135px"},{slug:"lastCrawlTime",label:l.lastCrawlTime.title,sortable:1<R.paginatedRows.totals.total,sortDir:k.value==="lastCrawlTime"?B.value:"asc",sorted:k.value==="lastCrawlTime",width:"120px"},{slug:"buttons",label:"",width:"60px"}]),Y=async(P,w,f)=>{f(P)},q=(P,w)=>{const f=l[w].parseValue(P[w]);let G=f==null?void 0:f.description;return w==="verdict"&&P.coverageState&&(G=P.coverageState),G?`${f.value} <div class="inner-row__desc">${G}</div>`:`${f.value}`},St=async(P,w)=>{A.value.activeRow=null,$.value.add(w);try{await x.getInspectionResult({paths:P.path,force:!0})}catch(f){console.error(f)}finally{$.value.delete(w);try{$.value.size||await Promise.all([b.fetchIndexStatusOverview(),b.fetchIndexStatusObjects()])}catch(f){console.error(f)}}};return(P,w)=>{var G,Z,tt;const f=It("base-button");return a(),u(t(Ht),{ref_key:"table",ref:A,id:nt,"additional-filters":Object.values(((Z=(G=t(b).options)==null?void 0:G.table)==null?void 0:Z.additionalFilters)||{}),"selected-filters":bt.value,"bulk-options":[],columns:vt.value,filters:[],"initial-items-per-page":t(y).settings.tablePagination[ot],"initial-page-number":ft.value,"initial-search-term":((tt=T.paginatedRows)==null?void 0:tt.searchTerm)||t(gt),key:t(mt),loading:t(X)||t(b).objects.fetching,rows:T.paginatedRows.rows,"show-bulk-actions":!1,"show-header":T.showHeader,"show-table-footer":T.showTableFooter,totals:T.paginatedRows.totals,"show-items-per-page":"",onFilterTable:t(W),onPaginate:t(ht),onProcessAdditionalFilters:w[0]||(w[0]=s=>t(H)({filters:s.filters,term:s.searchTerm,number:s.pageNumber})),onProcessChangeItemsPerPage:t(V),onSearch:t(_t),onSortColumn:t(pt)},{title:c(({row:s,index:v,editRow:p})=>{var C,L;return[e("div",Nt,[e("a",{href:"#",onClick:lt(M=>Y(v,s,p),["prevent"]),class:"allow-click"},i(s.objectTitle),9,Dt)]),s!=null&&s.objectId?(a(),n("div",Et,[e("span",Wt,[e("a",{href:(s==null?void 0:s.permalink)||"#",target:"_blank"},i(t(r)(((C=s==null?void 0:s.postTypeLabels)==null?void 0:C.singular)||null)),9,qt),d(" | "),e("a",{href:(s==null?void 0:s.editLink)||"#",target:"_blank"},i(t(U)(((L=s==null?void 0:s.postTypeLabels)==null?void 0:L.singular)||null)),9,zt),d(" | "),e("a",{href:"#",onClick:lt(M=>St(s,v),["prevent","exact"])},i(_.refreshStatus),9,Jt)])])):S("",!0)]}),"edit-row":c(({row:s})=>{var v;return[e("div",Kt,[e("div",Qt,i(_.indexStatusResult),1),e("table",Xt,[Yt,e("tbody",null,[s.lastCrawlTime?(a(),n(F,{key:1},[e("tr",null,[e("th",le,i(t(l).pageFetchState.title)+":",1),e("td",null,[e("div",ie,[(a(),u(m(t(l).pageFetchState.getIcon(s.pageFetchState)),{width:"20",height:"20"})),d(" "+i(t(l).pageFetchState.parseValue(s.pageFetchState).value),1)])]),e("th",oe,i(t(l).crawledAs.title)+":",1),e("td",null,[e("div",ne,[(a(),u(m(t(l).crawledAs.getIcon(s.crawledAs)),{width:"20",height:"20",color:"#8C8F9A"})),d(" "+i(t(l).crawledAs.parseValue(s.crawledAs).value),1)])])]),e("tr",null,[e("th",re,i(t(l).indexingState.title),1),e("td",null,[e("div",ce,[(a(),u(m(t(l).indexingState.getIcon(s.indexingState)),{width:"20",height:"20"})),e("div",{innerHTML:q(s,"indexingState")},null,8,ue)])]),e("th",de,i(t(l).lastCrawlTime.title)+":",1),e("td",null,[e("div",he,[(a(),u(m(t(l).lastCrawlTime.getIcon(s.lastCrawlTime)),{width:"20",height:"20",color:"#8C8F9A"})),d(" "+i(t(l).lastCrawlTime.parseValue(s.lastCrawlTime).value),1)])])]),e("tr",null,[e("th",_e,i(t(l).verdict.title)+":",1),e("td",null,[e("div",pe,[(a(),u(m(t(l).verdict.getIcon(s.verdict)),{width:"20",height:"20"})),e("div",{innerHTML:q(s,"verdict")},null,8,ge)])]),e("th",me,i(t(l).googleCanonical.title)+":",1),e("td",null,[e("div",be,[(a(),u(m(t(l).googleCanonical.getIcon()),{width:"20",height:"20",color:"#8C8F9A"})),e("span",{innerHTML:t(l).googleCanonical.parseValue(s.googleCanonical).value},null,8,fe)])])]),e("tr",null,[e("th",ve,i(t(l).robotsTxtState.title)+":",1),e("td",null,[e("div",Se,[(a(),u(m(t(l).robotsTxtState.getIcon(s.robotsTxtState)),{width:"20",height:"20"})),e("div",{innerHTML:q(s,"robotsTxtState")},null,8,ye)])]),e("th",ke,i(t(l).userCanonical.title)+":",1),e("td",null,[e("div",xe,[(a(),u(m(t(l).userCanonical.getIcon()),{width:"20",height:"20",color:"#8C8F9A"})),e("span",{innerHTML:t(l).userCanonical.parseValue(s.userCanonical).value},null,8,Ce)])])]),s!=null&&s.inspectionResultLink?(a(),n("tr",Te,[e("td",Re,[e("a",{class:"inner-table__inspection-link button-secondary",href:s.inspectionResultLink,target:"_blank"},[d(i(t(I).inspectOnGsc)+" ",1),h(t(K),{width:"12",height:"12"})],8,we)])])):S("",!0)],64)):(a(),n("tr",Zt,[e("td",te,[s.coverageState&&s.indexingState!=="INDEXING_ALLOWED"?(a(),n("span",ee,i(s.coverageState)+". ",1)):(a(),n("span",se,i(t(I).noResultsYetLowercase)+". ",1)),s!=null&&s.inspectionResultLink?(a(),n("a",{key:2,class:"inner-table__inspection-link",href:s.inspectionResultLink,target:"_blank"},[d(i(t(I).inspectOnGsc)+" ",1),h(t(K),{width:"12",height:"12"})],8,ae)):S("",!0)])]))])]),s.lastCrawlTime?(a(),n(F,{key:0},[e("div",Ie,[d(i(_.sitemaps)+" ",1),h(t(z),{placement:"right"},{tooltip:c(()=>[d(i(_.sitemapsHelp),1)]),default:c(()=>[h(t(J))]),_:1})]),e("table",Le,[e("tbody",null,[s.sitemap.length?(a(!0),n(F,{key:0},j(s.sitemap,(p,C)=>(a(),n("tr",{key:`sitemap-${C}`},[e("td",Pe,[h(t(it),{width:20,height:20,color:"#8C8F9A"}),e("a",{href:p,target:"_blank"},i(p),9,Fe)])]))),128)):(a(),n("tr",Ae,[e("td",null,i(_.notAvailable),1)]))])]),e("div",Oe,[d(i(_.referringPages)+" ",1),h(t(z),{placement:"right"},{tooltip:c(()=>[d(i(_.referringPagesHelp),1)]),default:c(()=>[h(t(J))]),_:1})]),e("table",He,[e("tbody",null,[s.referringUrls.length?(a(!0),n(F,{key:0},j(s.referringUrls,(p,C)=>(a(),n("tr",{key:`sitemap-${C}`},[e("td",Ve,[h(t(it),{width:20,height:20,color:"#8C8F9A"}),e("a",{href:p,target:"_blank"},i(p),9,$e)])]))),128)):(a(),n("tr",Ge,[e("td",null,i(_.notAvailable),1)]))])]),e("div",je,[d(i(_.richResultTypes)+" ",1),h(t(z),{placement:"right"},{tooltip:c(()=>[d(i(_.richResultTypesHelp),1)]),default:c(()=>[h(t(J))]),_:1})]),e("table",Ue,[Be,e("tbody",null,[(((v=s.richResultsResult)==null?void 0:v.detectedItems)||[]).length?(a(!0),n(F,{key:0},j(t(O)(s.richResultsResult),(p,C)=>(a(),n("tr",{key:`rich-result-type-${C}`},[e("th",Me,[e("div",Ne,[(a(),u(m(p.icon),{color:"#8C8F9A",fill:"currentColor"})),e("span",De,i(p.label),1)])]),e("td",Ee,[(a(!0),n(F,null,j(p.items,(L,M)=>(a(),n("div",{class:"rich-result-type-item",key:`rich-result-type-item-${M}`},[e("b",null,i(L.name),1),L.issues.length?(a(),n("div",We,[e("b",null,i(_.issues),1),(a(!0),n(F,null,j(L.issues,(et,yt)=>(a(),n("div",{key:`rich-result-type-item-issue-${yt}`,class:"inner-table__col"},[(a(),u(m(et.icon()))),d(" "+i(et.message),1)]))),128))])):(a(),n("div",qe,[e("div",ze,[h(t(Rt),{width:"20",height:"20"}),d(" "+i(_.noIssues),1)])]))]))),128))])]))),128)):(a(),n("tr",Je,[e("td",null,i(_.notAvailable),1)])),s!=null&&s.richResultsTestLink?(a(),n("tr",Ke,[e("td",Qe,[e("a",{class:"button-secondary",href:s.richResultsTestLink,target:"_blank"},[d(i(t(I).testWithGoogle)+" ",1),h(t(K),{width:"12",height:"12"})],8,Xe)])])):S("",!0)])])],64)):S("",!0)])]}),verdict:c(({row:s})=>[s.lastCrawlTime?(a(),n("div",{key:0,title:t(l).verdict.parseValue(s.verdict).value},[(a(),u(m(t(l).verdict.getIcon(s.verdict)),{width:"20",height:"20"}))],8,Ye)):S("",!0)]),robotsTxt:c(({row:s})=>[s.lastCrawlTime?(a(),n("div",{key:0,title:t(l).robotsTxtState.parseValue(s.robotsTxtState).value},[(a(),u(m(t(l).robotsTxtState.getIcon(s.robotsTxtState)),{width:"20",height:"20"}))],8,Ze)):S("",!0)]),crawledAs:c(({row:s})=>[s.lastCrawlTime?(a(),n("div",{key:0,title:t(l).crawledAs.parseValue(s.crawledAs).value},[(a(),u(m(t(l).crawledAs.getIcon(s.crawledAs)),{width:"20",height:"20",color:"#8C8F9A"}))],8,ts)):S("",!0)]),pageFetch:c(({row:s})=>[s.lastCrawlTime?(a(),n("div",{key:0,title:t(l).pageFetchState.parseValue(s.pageFetchState).value},[(a(),u(m(t(l).pageFetchState.getIcon(s.pageFetchState)),{width:"20",height:"20"}))],8,es)):S("",!0)]),richResults:c(({row:s})=>{var v;return[(((v=s.richResultsResult)==null?void 0:v.detectedItems)||[]).length?(a(!0),n(F,{key:0},j(t(O)(s.richResultsResult),p=>(a(),n("div",{class:"rich-result-type",key:`rich-result-type-${p.label}`},[(a(),u(m(p.icon),{fill:"currentColor"})),e("span",{class:"rich-result-type__label",title:p.label},i(p.label),9,ss)]))),128)):S("",!0)]}),lastCrawlTime:c(({row:s})=>[d(i(t(l).lastCrawlTime.parseValue(s.lastCrawlTime).value),1)]),buttons:c(({row:s,index:v,editRow:p})=>{var C,L;return[h(f,{onClick:M=>Y(v,s,p),type:((C=A.value)==null?void 0:C.activeRow)===v?"blue":"gray",disabled:t(X),class:ut([{active:((L=A.value)==null?void 0:L.activeRow)===v},"btn-toggle-row allow-click"])},{default:c(()=>[h(t(wt),{width:"20"})]),_:2},1032,["onClick","type","disabled","class"]),$.value.has(v)?(a(),n("div",as,[h(t(ct))])):S("",!0)]}),_:1},8,["additional-filters","selected-filters","columns","initial-items-per-page","initial-page-number","initial-search-term","loading","rows","show-header","show-table-footer","totals","onFilterTable","onPaginate","onProcessChangeItemsPerPage","onSearch","onSortColumn"])}}},is={class:"aioseo-donut-chart-with-legend-wrapper"},os={__name:"Index",setup(T){const o=rt(),b=E(),x="all-in-one-seo-pack",y={presenceOnGoogle:g("Presence on Google",x),tooltipPresenceOnGoogle:g("View at a glance how many of your posts have been indexed and discovered by Google.",x),indexOfIndividual:g("Post Index Status",x),tooltipIndexOfIndividual:g("The table below shows the index status of each of your posts, along with any extra information from Google that may be relevant as to why they are not indexed.",x),totalUrls:g("Total Posts",x)},_=D(null),R=D(""),$=N(()=>{const l=o.overview;if(!l)return[];const O=o.options.table.additionalFilters.statusOptions.options.filter(r=>!!(r!=null&&r.value)).map(r=>({...r,regex:new RegExp(r.value,"i"),name:r.label,emitValue:r.value,link:"#"}));let I=0;const U=O.map((r,k)=>{const H=l.post.results.filter(V=>r.regex.test(V==null?void 0:V.coverageState)).reduce((V,W)=>V+Number(W.count||0),0);return I+=H,{...r,count:H,ratio:k===0?100:l.post.total?H/l.post.total*100:0}}).map(r=>{if(r.value==="unknown|excluded|invalid|error"){const k=l.post.total-I;return{...r,count:r.count+k,ratio:l.post.total?(r.count+k)/l.post.total*100:0}}return r});return U.forEach((r,k)=>(k===0||U.forEach((B,H)=>(k<H&&(r.ratio=r.ratio+B.ratio),r)),r)),U}),A=async l=>{R.value=l,await Pt(),_.value.$el.querySelector(".aioseo-wp-additional-filters button").click(),R.value=""};return Lt(async()=>{if(b.isConnected&&!b.shouldShowSampleReports&&!o.objects.paginated.rows.length)try{await Promise.all([o.fetchIndexStatusOverview(),o.fetchIndexStatusObjects()])}catch(l){console.error(l)}}),(l,O)=>(a(),n("div",null,[h(t(at),{slug:"presenceOnGoogle","header-text":y.presenceOnGoogle,toggles:!1,"no-slide":""},{"header-icon":c(()=>[h(t(Vt),{width:"24",height:"24"})]),tooltip:c(()=>[d(i(y.tooltipPresenceOnGoogle),1)]),default:c(()=>[e("div",is,[t(o).overview===null?(a(),u(t(ct),{key:0,dark:""})):(a(),u(t(Tt),{key:1,total:t(o).overview.post.total,parts:$.value,label:y.totalUrls,onOnLabelClick:O[0]||(O[0]=I=>A(I))},null,8,["total","parts","label"]))])]),_:1},8,["header-text"]),h(t(at),{slug:"indexOfIndividual","header-text":y.indexOfIndividual,toggles:!1,"no-slide":""},{tooltip:c(()=>[d(i(y.tooltipIndexOfIndividual),1)]),default:c(()=>[h(t(ls),{ref_key:"refObjectsTable",ref:_,"paginated-rows":t(o).objects.paginated,"selected-status":R.value},null,8,["paginated-rows","selected-status"])]),_:1},8,["header-text"])]))}},dt=$t(os,[["__scopeId","data-v-63457f4d"]]),ns={__name:"Blur",setup(T){return(o,b)=>(a(),u(t(Gt),null,{default:c(()=>[h(t(dt))]),_:1}))}},rs={__name:"Index",setup(T){const{strings:o}=Bt(),b=xt(),x=Ct(),y=E();return(_,R)=>(a(),n("div",null,[t(y).shouldShowSampleReports?S("",!0):(a(),u(t(ns),{key:0})),t(y).shouldShowSampleReports?S("",!0):(a(),u(t(jt),{key:1,"cta-second-button-action":"",onCtaSecondButtonClick:t(y).showSampleReports,"cta-link":t(st).getPricingUrl("search-statistics","search-statistics-upsell","index-status"),"button-text":t(o).ctaButtonText,"second-button-text":t(o).ctaSecondButtonText,"cta-second-button-new-badge":"","cta-second-button-visible":"","learn-more-link":t(st).getUpsellUrl("search-statistics","index-status",t(x).isPro?"pricing":"liteUpgrade"),"feature-list":[t(o).feature1,t(o).feature2,t(o).feature3,t(o).feature4],"align-top":"","hide-bonus":!t(b).isUnlicensed},{"header-text":c(()=>[d(i(t(o).ctaHeader),1)]),description:c(()=>[h(t(Ut),{"core-feature":["search-statistics"]}),d(" "+i(t(o).ctaDescription),1)]),_:1},8,["onCtaSecondButtonClick","cta-link","button-text","second-button-text","learn-more-link","feature-list","hide-bonus"]))]))}},qs={__name:"IndexStatus",setup(T){const o=E(),{shouldShowLite:b,shouldShowUpgrade:x}=Mt();return(y,_)=>(t(x)("search-statistics","index-status")||t(b))&&!t(o).shouldShowSampleReports?(a(),u(t(rs),{key:0,class:"aioseo-search-statistics-index-status"})):(a(),u(t(dt),{key:1,class:ut([{"aioseo-search-statistics-index-status--disable-click":t(o).shouldShowSampleReports},"aioseo-search-statistics-index-status"])},null,8,["class"]))}};export{qs as default};
